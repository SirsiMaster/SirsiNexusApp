(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6801],{616:(e,t,s)=>{"use strict";s.d(t,{ProjectDetail:()=>eY});var r=s(73365),a=s(1521),l=s(50627),n=s(87088),i=s(35324);class d{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(this.baseURL).concat(e),r={...t,headers:{"Content-Type":"application/json",...t.headers}};try{let e=await fetch(s,r);if(!e.ok)throw await e.json().catch(()=>({message:"HTTP ".concat(e.status,": ").concat(e.statusText)}));return await e.json()}catch(e){throw console.error("API request failed:",e),e}}async get(e,t){return this.request(e,{...t,method:"GET"})}async post(e,t,s){return this.request(e,{...s,method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t,s){return this.request(e,{...s,method:"PUT",body:t?JSON.stringify(t):void 0})}async delete(e,t){return this.request(e,{...t,method:"DELETE"})}constructor(e="http://localhost:8080"){this.baseURL=e}}let o=new d,c=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=localStorage.getItem("auth_token"),r={"Content-Type":"application/json",...s&&{Authorization:"Bearer ".concat(s)},...t.headers};return o.request(e,{...t,headers:r})},u={list:async()=>await c("/api/projects"),create:async e=>await c("/api/projects",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>await c("/api/projects/".concat(e),{method:"PATCH",body:JSON.stringify(t)}),delete:async e=>await c("/api/projects/".concat(e),{method:"DELETE"}),addTeamMember:async(e,t,s)=>await c("/api/projects/".concat(e,"/team"),{method:"POST",body:JSON.stringify({userId:t,role:s})}),removeTeamMember:async(e,t)=>await c("/api/projects/".concat(e,"/team/").concat(t),{method:"DELETE"})};var m=s(62222);let x=()=>{let e=(0,n.wA)(),{toast:t}=(0,m.d)(),{projects:s,currentProject:r,loading:l,error:d,filters:o,sort:c}=(0,n.d4)(e=>e.projects),x=(0,a.useCallback)(async()=>{try{e((0,i.r1)(!0));let s=await u.list();if(s.success)e((0,i.r$)(s.data)),e((0,i.Nh)(null));else{let s="Failed to fetch projects";e((0,i.Nh)(s)),t({title:"Error",description:s,variant:"destructive"})}}catch(r){let s=r instanceof Error?r.message:"Failed to fetch projects";e((0,i.Nh)(s)),t({title:"Error",description:s,variant:"destructive"})}finally{e((0,i.r1)(!1))}},[e,t]),p=async s=>{try{e((0,i.r1)(!0));let r=await u.create(s);if(r.success)return e((0,i.By)(r.data)),e((0,i.Nh)(null)),t({title:"Success",description:"Project created successfully"}),r.data;{let s="Failed to create project";return e((0,i.Nh)(s)),t({title:"Error",description:s,variant:"destructive"}),null}}catch(r){let s=r instanceof Error?r.message:"Failed to create project";return e((0,i.Nh)(s)),t({title:"Error",description:s,variant:"destructive"}),null}finally{e((0,i.r1)(!1))}},h=async(s,r)=>{try{e((0,i.r1)(!0));let a=await u.update(s,r);if(a.success)return e((0,i.vr)(a.data)),e((0,i.Nh)(null)),t({title:"Success",description:"Project updated successfully"}),a.data;{let s="Failed to update project";return e((0,i.Nh)(s)),t({title:"Error",description:s,variant:"destructive"}),null}}catch(r){let s=r instanceof Error?r.message:"Failed to update project";return e((0,i.Nh)(s)),t({title:"Error",description:s,variant:"destructive"}),null}finally{e((0,i.r1)(!1))}},f=async s=>{try{if(e((0,i.r1)(!0)),(await u.delete(s)).success)return e((0,i.xx)(s)),e((0,i.Nh)(null)),t({title:"Success",description:"Project deleted successfully"}),!0;{let s="Failed to delete project";return e((0,i.Nh)(s)),t({title:"Error",description:s,variant:"destructive"}),!1}}catch(r){let s=r instanceof Error?r.message:"Failed to delete project";return e((0,i.Nh)(s)),t({title:"Error",description:s,variant:"destructive"}),!1}finally{e((0,i.r1)(!1))}},j=async(s,r,a)=>{try{if(e((0,i.r1)(!0)),(await u.addTeamMember(s,r,a)).success)return e((0,i.dr)({projectId:s,member:{id:r,name:"New Member",role:a}})),e((0,i.Nh)(null)),t({title:"Success",description:"Team member added successfully"}),!0;{let s="Failed to add team member";return e((0,i.Nh)(s)),t({title:"Error",description:s,variant:"destructive"}),!1}}catch(r){let s=r instanceof Error?r.message:"Failed to add team member";return e((0,i.Nh)(s)),t({title:"Error",description:s,variant:"destructive"}),!1}finally{e((0,i.r1)(!1))}},g=async(s,r)=>{try{if(e((0,i.r1)(!0)),(await u.removeTeamMember(s,r)).success)return e((0,i.i3)({projectId:s,memberId:r})),e((0,i.Nh)(null)),t({title:"Success",description:"Team member removed successfully"}),!0;{let s="Failed to remove team member";return e((0,i.Nh)(s)),t({title:"Error",description:s,variant:"destructive"}),!1}}catch(r){let s=r instanceof Error?r.message:"Failed to remove team member";return e((0,i.Nh)(s)),t({title:"Error",description:s,variant:"destructive"}),!1}finally{e((0,i.r1)(!1))}},y=async(t,s)=>{try{if(e((0,i.r1)(!0)),(await u.update(t,{stats:s})).success)return e((0,i.kL)({projectId:t,stats:s})),e((0,i.Nh)(null)),!0;return e((0,i.Nh)("Failed to update project stats")),!1}catch(s){let t=s instanceof Error?s.message:"Failed to update project stats";return e((0,i.Nh)(t)),!1}finally{e((0,i.r1)(!1))}};return(0,a.useEffect)(()=>{x()},[x]),{projects:s,currentProject:r,loading:l,error:d,filters:o,sort:c,createProject:p,updateProjectDetails:h,deleteProject:f,addTeamMember:j,removeTeamMember:g,updateStats:y,setFilters:t=>{e((0,i.vm)(t))},setSort:(t,s)=>{e((0,i.ID)({field:t,order:s}))},refetch:x}};var p=s(58005),h=s(33414),f=s(95561),j=s(18159),g=s(11199),y=s(14130);let v=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(g.bL,{ref:t,className:(0,y.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...a})});v.displayName=g.bL.displayName;let b=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(g._V,{ref:t,className:(0,y.cn)("aspect-square h-full w-full",s),...a})});b.displayName=g._V.displayName;let N=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(g.H4,{ref:t,className:(0,y.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...a})});N.displayName=g.H4.displayName;var w=s(93149),k=s(36209),C=s(19237),P=s(89752),E=s(48447);let T=P.bL;P.l9;let S=P.ZL;P.bm;let R=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(P.hJ,{ref:t,className:(0,y.cn)("fixed inset-0 z-50 bg-slate-900/50 backdrop-blur-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a})});R.displayName=P.hJ.displayName;let A=a.forwardRef((e,t)=>{let{className:s,children:a,description:l,...n}=e;return(0,r.jsxs)(S,{children:[(0,r.jsx)(R,{}),(0,r.jsxs)(P.UC,{ref:t,className:(0,y.cn)("glass-ultra fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 p-6 shadow-intense duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-xl text-slate-800",s),...n,children:[l&&(0,r.jsx)(P.VY,{className:"sr-only",children:l}),a,(0,r.jsxs)(P.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(E.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});A.displayName=P.UC.displayName;let I=e=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,y.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};I.displayName="DialogHeader";let F=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(P.hE,{ref:t,className:(0,y.cn)("text-lg font-semibold leading-none tracking-tight",s),...a})});F.displayName=P.hE.displayName;let D=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(P.VY,{ref:t,className:(0,y.cn)("text-sm text-muted-foreground",s),asChild:!0,...a,children:(0,r.jsx)("div",{children:a.children})})});D.displayName=P.VY.displayName;var _=s(73049);let V=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{className:(0,y.cn)("space-y-6",s),ref:t,...a})});V.displayName="Form";let O=a.createContext({}),L=e=>{let{...t}=e;return(0,r.jsx)(O.Provider,{value:{name:t.name},children:(0,r.jsx)(w.xI,{...t})})},U=()=>{var e;let t=a.useContext(O),s=a.useContext(z),r=(0,w.xW)(),l=a.useId();if(!t)throw Error("useFormField should be used within <FormField>");let{name:n}=t,i=(null==s?void 0:s.id)||l,d=null==r||null==(e=r.getFieldState)?void 0:e.call(r,n,r.formState),o=null==d?void 0:d.error;return{id:i,name:n,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),error:o}},z=a.createContext({}),$=a.forwardRef((e,t)=>{let{className:s,...l}=e,n=a.useId();return(0,r.jsx)(z.Provider,{value:{id:n},children:(0,r.jsx)("div",{ref:t,className:(0,y.cn)("space-y-2",s),...l})})});$.displayName="FormItem";let Z=a.forwardRef((e,t)=>{let{className:s,...a}=e,{formItemId:l}=U();return(0,r.jsx)(_.J,{ref:t,className:(0,y.cn)(s),htmlFor:l,...a})});Z.displayName="FormLabel";let q=a.forwardRef((e,t)=>{let{...s}=e,{formItemId:a,formDescriptionId:l,formMessageId:n}=U();return(0,r.jsx)("div",{ref:t,id:a,"aria-describedby":l?"".concat(l," ").concat(n):"".concat(n),...s})});q.displayName="FormControl",a.forwardRef((e,t)=>{let{className:s,...a}=e,{formDescriptionId:l}=U();return(0,r.jsx)("p",{ref:t,id:l,className:(0,y.cn)("text-sm text-muted-foreground",s),...a})}).displayName="FormDescription";let M=a.forwardRef((e,t)=>{let{className:s,children:a,...l}=e,{formMessageId:n,error:i}=U(),d=i?String(i.message):a;return d?(0,r.jsx)("p",{ref:t,id:n,className:(0,y.cn)("text-sm font-medium text-destructive",s),...l,children:d}):null});M.displayName="FormMessage";var J=s(43155),Y=s(18035),B=s(76754),H=s(11273),W=s(37554),G=s(87447);let X=B.bL;B.YJ;let Q=B.WT,K=a.forwardRef((e,t)=>{let{className:s,children:a,...l}=e;return(0,r.jsxs)(B.l9,{ref:t,className:(0,y.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...l,children:[a,(0,r.jsx)(B.In,{asChild:!0,children:(0,r.jsx)(H.A,{className:"h-4 w-4 opacity-50"})})]})});K.displayName=B.l9.displayName;let ee=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(B.PP,{ref:t,className:(0,y.cn)("flex cursor-default items-center justify-center py-1",s),...a,children:(0,r.jsx)(W.A,{className:"h-4 w-4"})})});ee.displayName=B.PP.displayName;let et=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(B.wn,{ref:t,className:(0,y.cn)("flex cursor-default items-center justify-center py-1",s),...a,children:(0,r.jsx)(H.A,{className:"h-4 w-4"})})});et.displayName=B.wn.displayName;let es=a.forwardRef((e,t)=>{let{className:s,children:a,position:l="popper",...n}=e;return(0,r.jsx)(B.ZL,{children:(0,r.jsxs)(B.UC,{ref:t,className:(0,y.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:l,...n,children:[(0,r.jsx)(ee,{}),(0,r.jsx)(B.LM,{className:(0,y.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,r.jsx)(et,{})]})})});es.displayName=B.UC.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(B.JU,{ref:t,className:(0,y.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...a})}).displayName=B.JU.displayName;let er=a.forwardRef((e,t)=>{let{className:s,children:a,...l}=e;return(0,r.jsxs)(B.q7,{ref:t,className:(0,y.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(B.VF,{children:(0,r.jsx)(G.A,{className:"h-4 w-4"})})}),(0,r.jsx)(B.p4,{children:a})]})});er.displayName=B.q7.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(B.wv,{ref:t,className:(0,y.cn)("-mx-1 my-1 h-px bg-muted",s),...a})}).displayName=B.wv.displayName;let ea=C.Ik({name:C.Yj().min(1,"Project name is required"),description:C.Yj().min(1,"Project description is required"),status:C.k5(["active","completed","archived"]),visibility:C.k5(["public","private"]),tags:C.Yj()}),el=e=>{var t;let{project:s,open:l,onOpenChange:n,onSuccess:i}=e,{updateProjectDetails:d}=x(),o=(0,w.mN)({resolver:(0,k.u)(ea),defaultValues:{name:s.name,description:s.description,status:s.status,visibility:(null==(t=s.settings)?void 0:t.visibility)||"private",tags:s.tags.join(", ")}});(0,a.useEffect)(()=>{if(l){var e;o.reset({name:s.name,description:s.description,status:s.status,visibility:(null==(e=s.settings)?void 0:e.visibility)||"private",tags:s.tags.join(", ")})}},[l,s,o]);let c=async e=>{await d(s.id,{name:e.name,description:e.description,status:e.status,settings:{allowComments:!0,notifications:!0,...s.settings,visibility:e.visibility},tags:e.tags.split(",").map(e=>e.trim()).filter(e=>""!==e)})&&(n(!1),null==i||i())};return(0,r.jsx)(T,{open:l,onOpenChange:n,children:(0,r.jsxs)(A,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(I,{children:[(0,r.jsx)(F,{children:"Edit Project"}),(0,r.jsx)(D,{children:"Update your project details."})]}),(0,r.jsx)(w.Op,{...o,children:(0,r.jsx)(V,{children:(0,r.jsxs)("form",{onSubmit:o.handleSubmit(c),className:"space-y-4",children:[(0,r.jsx)(L,{control:o.control,name:"name",render:e=>{let{field:t}=e;return(0,r.jsxs)($,{children:[(0,r.jsx)(Z,{children:"Name"}),(0,r.jsx)(q,{children:(0,r.jsx)(J.p,{placeholder:"Project name",...t})}),(0,r.jsx)(M,{})]})}}),(0,r.jsx)(L,{control:o.control,name:"description",render:e=>{let{field:t}=e;return(0,r.jsxs)($,{children:[(0,r.jsx)(Z,{children:"Description"}),(0,r.jsx)(q,{children:(0,r.jsx)(Y.T,{placeholder:"Project description",...t})}),(0,r.jsx)(M,{})]})}}),(0,r.jsx)(L,{control:o.control,name:"status",render:e=>{let{field:t}=e;return(0,r.jsxs)($,{children:[(0,r.jsx)(Z,{children:"Status"}),(0,r.jsxs)(X,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,r.jsx)(q,{children:(0,r.jsx)(K,{children:(0,r.jsx)(Q,{placeholder:"Select status"})})}),(0,r.jsxs)(es,{children:[(0,r.jsx)(er,{value:"active",children:"Active"}),(0,r.jsx)(er,{value:"completed",children:"Completed"}),(0,r.jsx)(er,{value:"archived",children:"Archived"})]})]}),(0,r.jsx)(M,{})]})}}),(0,r.jsx)(L,{control:o.control,name:"visibility",render:e=>{let{field:t}=e;return(0,r.jsxs)($,{children:[(0,r.jsx)(Z,{children:"Visibility"}),(0,r.jsxs)(X,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,r.jsx)(q,{children:(0,r.jsx)(K,{children:(0,r.jsx)(Q,{placeholder:"Select visibility"})})}),(0,r.jsxs)(es,{children:[(0,r.jsx)(er,{value:"public",children:"Public"}),(0,r.jsx)(er,{value:"private",children:"Private"})]})]}),(0,r.jsx)(M,{})]})}}),(0,r.jsx)(L,{control:o.control,name:"tags",render:e=>{let{field:t}=e;return(0,r.jsxs)($,{children:[(0,r.jsx)(Z,{children:"Tags"}),(0,r.jsx)(q,{children:(0,r.jsx)(J.p,{placeholder:"Enter tags separated by commas",...t})}),(0,r.jsx)(M,{})]})}}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,r.jsx)(p.$,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),(0,r.jsx)(p.$,{type:"submit",children:"Update Project"})]})]})})})]})})};var en=s(89806),ei=s(18135),ed=s(30571);let eo=en.bL,ec=en.l9;en.YJ,en.ZL,en.Pb,en.z6,a.forwardRef((e,t)=>{let{className:s,inset:a,children:l,...n}=e;return(0,r.jsxs)(en.ZP,{ref:t,className:(0,y.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",a&&"pl-8",s),...n,children:[l,(0,r.jsx)(ei.A,{className:"ml-auto h-4 w-4"})]})}).displayName=en.ZP.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(en.G5,{ref:t,className:(0,y.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a})}).displayName=en.G5.displayName;let eu=a.forwardRef((e,t)=>{let{className:s,sideOffset:a=4,...l}=e;return(0,r.jsx)(en.ZL,{children:(0,r.jsx)(en.UC,{ref:t,sideOffset:a,className:(0,y.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...l})})});eu.displayName=en.UC.displayName;let em=a.forwardRef((e,t)=>{let{className:s,inset:a,...l}=e;return(0,r.jsx)(en.q7,{ref:t,className:(0,y.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a&&"pl-8",s),...l})});em.displayName=en.q7.displayName,a.forwardRef((e,t)=>{let{className:s,children:a,checked:l,...n}=e;return(0,r.jsxs)(en.H_,{ref:t,className:(0,y.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:l,...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(en.VF,{children:(0,r.jsx)(G.A,{className:"h-4 w-4"})})}),a]})}).displayName=en.H_.displayName,a.forwardRef((e,t)=>{let{className:s,children:a,...l}=e;return(0,r.jsxs)(en.hN,{ref:t,className:(0,y.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(en.VF,{children:(0,r.jsx)(ed.A,{className:"h-2 w-2 fill-current"})})}),a]})}).displayName=en.hN.displayName;let ex=a.forwardRef((e,t)=>{let{className:s,inset:a,...l}=e;return(0,r.jsx)(en.JU,{ref:t,className:(0,y.cn)("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",s),...l})});ex.displayName=en.JU.displayName;let ep=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(en.wv,{ref:t,className:(0,y.cn)("-mx-1 my-1 h-px bg-muted",s),...a})});ep.displayName=en.wv.displayName;let eh=()=>{let[e,t]=(0,a.useState)([]),[s,r]=(0,a.useState)(!0),[l,n]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/users");if(!e.ok)throw Error("Failed to fetch users");let s=await e.json();t(s),n(null)}catch(e){n(e instanceof Error?e.message:"Failed to fetch users")}finally{r(!1)}})()},[]),{users:e,loading:s,error:l}};var ef=s(74903);let ej=C.Ik({userId:C.Yj().min(1,"Please select a user"),role:C.k5(["admin","member"])}),eg=e=>{let{projectId:t,open:s,onOpenChange:a}=e,{addTeamMember:l}=x(),{users:n,loading:i}=eh(),d=(0,w.mN)({resolver:(0,k.u)(ej),defaultValues:{role:"member"}}),o=async e=>{await l(t,e.userId,e.role)&&(d.reset(),a(!1))};return(0,r.jsx)(T,{open:s,onOpenChange:a,children:(0,r.jsxs)(A,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(I,{children:[(0,r.jsx)(F,{children:"Add Team Member"}),(0,r.jsx)(D,{children:"Add a new member to your project team."})]}),(0,r.jsx)(w.Op,{...d,children:(0,r.jsx)(V,{children:(0,r.jsxs)("form",{onSubmit:d.handleSubmit(o),className:"space-y-4",children:[(0,r.jsx)(L,{control:d.control,name:"userId",render:e=>{let{field:t}=e;return(0,r.jsxs)($,{children:[(0,r.jsx)(Z,{children:"User"}),(0,r.jsxs)(X,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,r.jsx)(q,{children:(0,r.jsx)(K,{children:(0,r.jsx)(Q,{placeholder:"Select a user"})})}),(0,r.jsx)(es,{children:i?(0,r.jsx)("div",{className:"flex items-center justify-center p-2",children:(0,r.jsx)(ef.A,{className:"h-4 w-4 animate-spin"})}):n.map(e=>(0,r.jsx)(er,{value:e.id,children:e.name},e.id))})]}),(0,r.jsx)(M,{})]})}}),(0,r.jsx)(L,{control:d.control,name:"role",render:e=>{let{field:t}=e;return(0,r.jsxs)($,{children:[(0,r.jsx)(Z,{children:"Role"}),(0,r.jsxs)(X,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,r.jsx)(q,{children:(0,r.jsx)(K,{children:(0,r.jsx)(Q,{placeholder:"Select a role"})})}),(0,r.jsxs)(es,{children:[(0,r.jsx)(er,{value:"member",children:"Member"}),(0,r.jsx)(er,{value:"admin",children:"Admin"})]})]}),(0,r.jsx)(M,{})]})}}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,r.jsx)(p.$,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),(0,r.jsx)(p.$,{type:"submit",children:"Add Member"})]})]})})})]})})};var ey=s(92887),ev=s(90673),eb=s(36435),eN=s(18132),ew=s(10287),ek=s(12915),eC=s(32793),eP=s(46868);let eE={download:ey.A,fileText:ev.A,barChart:eb.A,trending:eN.A,plus:ew.A,more:ek.A,trash:eC.A,edit:eP.A},eT=e=>{var t;let{projectId:s}=e,{projects:l,removeTeamMember:n}=x(),[i,d]=(0,a.useState)(!1),o=l.find(e=>e.id===s);if(!o)return null;let c=async e=>{window.confirm("Are you sure you want to remove this team member?")&&await n(s,e)};return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Team Members"}),(0,r.jsxs)(p.$,{onClick:()=>d(!0),children:[(0,r.jsx)(eE.plus,{className:"h-4 w-4 mr-2"}),"Add Member"]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:null==(t=o.team)?void 0:t.map(e=>{var t;return(0,r.jsx)(j.Zp,{children:(0,r.jsx)(j.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)(v,{children:[(0,r.jsx)(b,{src:""}),(0,r.jsx)(N,{children:null==(t=e.name)?void 0:t.slice(0,2).toUpperCase()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.role})]})]}),"admin"!==e.role&&(0,r.jsxs)(eo,{children:[(0,r.jsx)(ec,{asChild:!0,children:(0,r.jsxs)(p.$,{variant:"ghost",size:"sm",children:[(0,r.jsx)(eE.more,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,r.jsxs)(eu,{align:"end",children:[(0,r.jsx)(ex,{children:"Actions"}),(0,r.jsx)(ep,{}),(0,r.jsxs)(em,{className:"text-destructive",onClick:()=>c(e.id),children:[(0,r.jsx)(eE.trash,{className:"h-4 w-4 mr-2"}),"Remove Member"]})]})]})]})})},e.id)})}),(0,r.jsx)(eg,{projectId:s,open:i,onOpenChange:d})]})},eS=e=>{let[t,s]=(0,a.useState)([]),[r,l]=(0,a.useState)(!0),[n,i]=(0,a.useState)(null),{toast:d}=(0,m.d)(),o=(0,a.useCallback)(async()=>{try{l(!0);let t=await fetch("/api/projects/".concat(e,"/tasks"));if(!t.ok)throw Error("Failed to fetch tasks");let r=await t.json();s(r),i(null)}catch(t){let e=t instanceof Error?t.message:"Failed to fetch tasks";i(e),d({title:"Error",description:e,variant:"destructive"})}finally{l(!1)}},[e,d]),c=async t=>{try{let r=await fetch("/api/projects/".concat(e,"/tasks"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){let e=await r.json();throw Error(e.message||"Failed to create task")}let a=await r.json();return s(e=>[...e,a]),d({title:"Success",description:"Task created successfully"}),a}catch(e){return d({title:"Error",description:e instanceof Error?e.message:"Failed to create task",variant:"destructive"}),null}},u=async(t,r)=>{try{let a=await fetch("/api/projects/".concat(e,"/tasks/").concat(t),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!a.ok){let e=await a.json();throw Error(e.message||"Failed to update task")}let l=await a.json();return s(e=>e.map(e=>e.id===t?l:e)),d({title:"Success",description:"Task updated successfully"}),l}catch(e){return d({title:"Error",description:e instanceof Error?e.message:"Failed to update task",variant:"destructive"}),null}},x=async t=>{try{let r=await fetch("/api/projects/".concat(e,"/tasks/").concat(t),{method:"DELETE"});if(!r.ok){let e=await r.json();throw Error(e.message||"Failed to delete task")}return s(e=>e.filter(e=>e.id!==t)),d({title:"Success",description:"Task deleted successfully"}),!0}catch(e){return d({title:"Error",description:e instanceof Error?e.message:"Failed to delete task",variant:"destructive"}),!1}};return(0,a.useEffect)(()=>{o()},[o]),{tasks:t,loading:r,error:n,createTask:c,updateTask:u,deleteTask:x,refreshTasks:o}};var eR=s(91290),eA=s(47022);function eI(e){let{className:t,classNames:s,showOutsideDays:a=!0,...l}=e;return(0,r.jsx)(eA.hv,{showOutsideDays:a,className:(0,y.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,y.cn)((0,p.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,y.cn)((0,p.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:e=>{let{...t}=e;return(0,r.jsx)(eR.A,{className:"h-4 w-4"})},IconRight:e=>{let{...t}=e;return(0,r.jsx)(ei.A,{className:"h-4 w-4"})}},...l})}eI.displayName="Calendar";var eF=s(47049),eD=s(18541),e_=s(58279);let eV=e_.bL,eO=e_.l9,eL=a.forwardRef((e,t)=>{let{className:s,align:a="center",sideOffset:l=4,...n}=e;return(0,r.jsx)(e_.ZL,{children:(0,r.jsx)(e_.UC,{ref:t,align:a,sideOffset:l,className:(0,y.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})})});eL.displayName=e_.UC.displayName;let eU=C.Ik({title:C.Yj().min(1,"Task title is required"),description:C.Yj().min(1,"Task description is required"),status:C.k5(["todo","in_progress","completed","blocked"]),priority:C.k5(["low","medium","high","urgent"]),dueDate:C.p6().optional(),assigneeId:C.Yj().optional()}),ez=e=>{let{projectId:t,open:s,onOpenChange:a}=e,{createTask:l,loading:n,error:i}=eS(t),{projects:d}=x(),o=d.find(e=>e.id===t),c=(0,w.mN)({resolver:(0,k.u)(eU),defaultValues:{title:"",description:"",status:"todo",priority:"medium",assigneeId:""}}),u=async e=>{var s;await l({...e,projectId:t||"",dueDate:null==(s=e.dueDate)?void 0:s.toISOString()})&&(c.reset(),a(!1))};return(0,r.jsx)(T,{open:s,onOpenChange:a,children:(0,r.jsxs)(A,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(I,{children:[(0,r.jsx)(F,{children:"Create Task"}),(0,r.jsxs)(D,{children:["Add a new task to your project.",i&&(0,r.jsx)("p",{className:"text-sm text-destructive mt-2",children:i})]})]}),(0,r.jsx)(w.Op,{...c,children:(0,r.jsx)(V,{children:(0,r.jsxs)("form",{onSubmit:c.handleSubmit(u),className:"space-y-4",children:[(0,r.jsx)(L,{control:c.control,name:"title",render:e=>{let{field:t}=e;return(0,r.jsxs)($,{children:[(0,r.jsx)(Z,{children:"Title"}),(0,r.jsx)(q,{children:(0,r.jsx)(J.p,{placeholder:"Task title",...t})}),(0,r.jsx)(M,{})]})}}),(0,r.jsx)(L,{control:c.control,name:"description",render:e=>{let{field:t}=e;return(0,r.jsxs)($,{children:[(0,r.jsx)(Z,{children:"Description"}),(0,r.jsx)(q,{children:(0,r.jsx)(Y.T,{placeholder:"Task description",...t})}),(0,r.jsx)(M,{})]})}}),(0,r.jsx)(L,{control:c.control,name:"status",render:e=>{let{field:t}=e;return(0,r.jsxs)($,{children:[(0,r.jsx)(Z,{children:"Status"}),(0,r.jsxs)(X,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,r.jsx)(q,{children:(0,r.jsx)(K,{children:(0,r.jsx)(Q,{placeholder:"Select status"})})}),(0,r.jsxs)(es,{children:[(0,r.jsx)(er,{value:"todo",children:"To Do"}),(0,r.jsx)(er,{value:"in_progress",children:"In Progress"}),(0,r.jsx)(er,{value:"completed",children:"Completed"}),(0,r.jsx)(er,{value:"blocked",children:"Blocked"})]})]}),(0,r.jsx)(M,{})]})}}),(0,r.jsx)(L,{control:c.control,name:"priority",render:e=>{let{field:t}=e;return(0,r.jsxs)($,{children:[(0,r.jsx)(Z,{children:"Priority"}),(0,r.jsxs)(X,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,r.jsx)(q,{children:(0,r.jsx)(K,{children:(0,r.jsx)(Q,{placeholder:"Select priority"})})}),(0,r.jsxs)(es,{children:[(0,r.jsx)(er,{value:"low",children:"Low"}),(0,r.jsx)(er,{value:"medium",children:"Medium"}),(0,r.jsx)(er,{value:"high",children:"High"}),(0,r.jsx)(er,{value:"urgent",children:"Urgent"})]})]}),(0,r.jsx)(M,{})]})}}),(0,r.jsx)(L,{control:c.control,name:"dueDate",render:e=>{let{field:t}=e;return(0,r.jsxs)($,{className:"flex flex-col",children:[(0,r.jsx)(Z,{children:"Due Date"}),(0,r.jsxs)(eV,{children:[(0,r.jsx)(eO,{asChild:!0,children:(0,r.jsx)(q,{children:(0,r.jsxs)(p.$,{variant:"outline",className:(0,y.cn)("w-full pl-3 text-left font-normal",!t.value&&"text-muted-foreground"),children:[t.value?(0,eF.GP)(t.value,"PPP"):(0,r.jsx)("span",{children:"Pick a date"}),(0,r.jsx)(eD.A,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,r.jsx)(eL,{className:"w-auto p-0",align:"start",children:(0,r.jsx)(eI,{mode:"single",selected:t.value,onSelect:t.onChange,initialFocus:!0})})]}),(0,r.jsx)(M,{})]})}}),(0,r.jsx)(L,{control:c.control,name:"assigneeId",render:e=>{var t;let{field:s}=e;return(0,r.jsxs)($,{children:[(0,r.jsx)(Z,{children:"Assignee"}),(0,r.jsxs)(X,{onValueChange:s.onChange,value:s.value,children:[(0,r.jsx)(q,{children:(0,r.jsx)(K,{children:(0,r.jsx)(Q,{placeholder:"Select assignee"})})}),(0,r.jsx)(es,{children:null==o||null==(t=o.team)?void 0:t.map(e=>(0,r.jsx)(er,{value:e.id,children:e.name},e.id))})]}),(0,r.jsx)(M,{})]})}}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,r.jsx)(p.$,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),(0,r.jsx)(p.$,{type:"submit",disabled:n,children:n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"mr-2",children:"Creating..."}),(0,r.jsx)("div",{className:"h-4 w-4 border-t-2 border-b-2 border-current rounded-full animate-spin",role:"progressbar"})]}):"Create Task"})]})]})})})]})})},e$=C.Ik({title:C.Yj().min(1,"Task title is required"),description:C.Yj().min(1,"Task description is required"),status:C.k5(["todo","in_progress","completed","blocked"]),priority:C.k5(["low","medium","high","urgent"]),dueDate:C.p6().optional(),assigneeId:C.Yj().optional()}),eZ=e=>{let{task:t,open:s,onOpenChange:a}=e,{updateTask:l,loading:n,error:i}=eS(t.projectId),{projects:d}=x(),o=d.find(e=>e.id===t.projectId),c=(0,w.mN)({resolver:(0,k.u)(e$),defaultValues:{title:t.title,description:t.description,status:t.status,priority:t.priority,dueDate:t.dueDate?new Date(t.dueDate):void 0,assigneeId:t.assigneeId}}),u=async e=>{var s;await l(t.id,{...e,dueDate:null==(s=e.dueDate)?void 0:s.toISOString()})&&a(!1)};return(0,r.jsx)(T,{open:s,onOpenChange:a,children:(0,r.jsxs)(A,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(I,{children:[(0,r.jsx)(F,{children:"Edit Task"}),(0,r.jsxs)(D,{children:["Update your task details.",i&&(0,r.jsx)("p",{className:"text-sm text-destructive mt-2",children:i})]})]}),(0,r.jsx)(w.Op,{...c,children:(0,r.jsx)(V,{children:(0,r.jsxs)("form",{onSubmit:c.handleSubmit(u),className:"space-y-4",children:[(0,r.jsx)(L,{control:c.control,name:"title",render:e=>{let{field:t}=e;return(0,r.jsxs)($,{children:[(0,r.jsx)(Z,{children:"Title"}),(0,r.jsx)(q,{children:(0,r.jsx)(J.p,{placeholder:"Task title",...t})}),(0,r.jsx)(M,{})]})}}),(0,r.jsx)(L,{control:c.control,name:"description",render:e=>{let{field:t}=e;return(0,r.jsxs)($,{children:[(0,r.jsx)(Z,{children:"Description"}),(0,r.jsx)(q,{children:(0,r.jsx)(Y.T,{placeholder:"Task description",...t})}),(0,r.jsx)(M,{})]})}}),(0,r.jsx)(L,{control:c.control,name:"status",render:e=>{let{field:t}=e;return(0,r.jsxs)($,{children:[(0,r.jsx)(Z,{children:"Status"}),(0,r.jsxs)(X,{onValueChange:t.onChange,value:t.value,children:[(0,r.jsx)(q,{children:(0,r.jsx)(K,{children:(0,r.jsx)(Q,{placeholder:"Select status"})})}),(0,r.jsxs)(es,{children:[(0,r.jsx)(er,{value:"todo",children:"To Do"}),(0,r.jsx)(er,{value:"in_progress",children:"In Progress"}),(0,r.jsx)(er,{value:"completed",children:"Completed"}),(0,r.jsx)(er,{value:"blocked",children:"Blocked"})]})]}),(0,r.jsx)(M,{})]})}}),(0,r.jsx)(L,{control:c.control,name:"priority",render:e=>{let{field:t}=e;return(0,r.jsxs)($,{children:[(0,r.jsx)(Z,{children:"Priority"}),(0,r.jsxs)(X,{onValueChange:t.onChange,value:t.value,children:[(0,r.jsx)(q,{children:(0,r.jsx)(K,{children:(0,r.jsx)(Q,{placeholder:"Select priority"})})}),(0,r.jsxs)(es,{children:[(0,r.jsx)(er,{value:"low",children:"Low"}),(0,r.jsx)(er,{value:"medium",children:"Medium"}),(0,r.jsx)(er,{value:"high",children:"High"}),(0,r.jsx)(er,{value:"urgent",children:"Urgent"})]})]}),(0,r.jsx)(M,{})]})}}),(0,r.jsx)(L,{control:c.control,name:"dueDate",render:e=>{let{field:t}=e;return(0,r.jsxs)($,{className:"flex flex-col",children:[(0,r.jsx)(Z,{children:"Due Date"}),(0,r.jsxs)(eV,{children:[(0,r.jsx)(eO,{asChild:!0,children:(0,r.jsx)(q,{children:(0,r.jsxs)(p.$,{variant:"outline",className:(0,y.cn)("w-full pl-3 text-left font-normal",!t.value&&"text-muted-foreground"),children:[t.value?(0,eF.GP)(t.value,"PPP"):(0,r.jsx)("span",{children:"Pick a date"}),(0,r.jsx)(eD.A,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,r.jsx)(eL,{className:"w-auto p-0",align:"start",children:(0,r.jsx)(eI,{mode:"single",selected:t.value,onSelect:t.onChange,initialFocus:!0})})]}),(0,r.jsx)(M,{})]})}}),(0,r.jsx)(L,{control:c.control,name:"assigneeId",render:e=>{var t;let{field:s}=e;return(0,r.jsxs)($,{children:[(0,r.jsx)(Z,{children:"Assignee"}),(0,r.jsxs)(X,{onValueChange:s.onChange,value:s.value,children:[(0,r.jsx)(q,{children:(0,r.jsx)(K,{children:(0,r.jsx)(Q,{placeholder:"Select assignee"})})}),(0,r.jsx)(es,{children:null==o||null==(t=o.team)?void 0:t.map(e=>(0,r.jsx)(er,{value:e.id,children:e.name},e.id))})]}),(0,r.jsx)(M,{})]})}}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,r.jsx)(p.$,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),(0,r.jsx)(p.$,{type:"submit",disabled:n,children:n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"mr-2",children:"Updating..."}),(0,r.jsx)("div",{className:"h-4 w-4 border-t-2 border-b-2 border-current rounded-full animate-spin",role:"progressbar"})]}):"Update Task"})]})]})})})]})})};var eq=s(49651);let eM=e=>{let{projectId:t}=e,{tasks:s,loading:l,error:n,deleteTask:i}=eS(t),[d,o]=(0,a.useState)(!1),[c,u]=(0,a.useState)(null);if(l)return(0,r.jsx)("div",{children:"Loading tasks..."});if(n)return(0,r.jsxs)("div",{children:["Error: ",n]});let m=async e=>{window.confirm("Are you sure you want to delete this task?")&&await i(e)},x=e=>{switch(e){case"todo":default:return"bg-gray-50 dark:bg-gray-9000";case"in_progress":return"bg-blue-50 dark:bg-blue-900/200";case"completed":return"bg-green-50 dark:bg-green-900/200";case"blocked":return"bg-red-50 dark:bg-red-900/200"}},f=e=>{switch(e){case"low":default:return"bg-gray-50 dark:bg-gray-9000";case"medium":return"bg-yellow-50 dark:bg-yellow-900/200";case"high":return"bg-orange-500";case"urgent":return"bg-red-50 dark:bg-red-900/200"}};return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Tasks"}),(0,r.jsxs)(p.$,{onClick:()=>o(!0),children:[(0,r.jsx)(eE.plus,{className:"h-4 w-4 mr-2"}),"Add Task"]})]}),(0,r.jsx)("div",{className:"space-y-4",children:s.map(e=>{var t;return(0,r.jsx)(j.Zp,{children:(0,r.jsxs)(j.Wu,{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h4",{className:"font-medium",children:e.title}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(h.E,{className:x(e.status),children:e.status.replace("_"," ")}),(0,r.jsx)(h.E,{className:f(e.priority),children:e.priority}),e.dueDate&&(0,r.jsxs)(h.E,{variant:"outline",children:["Due ",(0,eq.m)(new Date(e.dueDate))]})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(p.$,{variant:"ghost",size:"sm",onClick:()=>u(e),children:[(0,r.jsx)(eE.edit,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Edit task"})]}),(0,r.jsxs)(p.$,{variant:"ghost",size:"sm",onClick:()=>m(e.id),children:[(0,r.jsx)(eE.trash,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Delete task"})]})]})]}),e.assignee&&(0,r.jsxs)("div",{className:"mt-4 flex items-center gap-2",children:[(0,r.jsxs)(v,{className:"h-6 w-6",children:[(0,r.jsx)(b,{src:e.assignee.image}),(0,r.jsx)(N,{children:null==(t=e.assignee.name)?void 0:t.slice(0,2).toUpperCase()})]}),(0,r.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.assignee.name})]})]})},e.id)})}),(0,r.jsx)(ez,{projectId:t,open:d,onOpenChange:o}),c&&(0,r.jsx)(eZ,{task:c,open:!!c,onOpenChange:e=>!e&&u(null)})]})};var eJ=s(69672);let eY=e=>{var t,s,n;let{id:i}=e,d=(0,l.useRouter)(),{projects:o,loading:c,error:u,deleteProject:m}=x(),[g,y]=(0,a.useState)(!1),w=o.find(e=>e.id===i);if(c)return(0,r.jsx)("div",{children:"Loading..."});if(u)return(0,r.jsxs)("div",{children:["Error: ",u]});if(!w)return(0,r.jsx)("div",{children:"Project not found"});let k=async()=>{window.confirm("Are you sure you want to delete this project?")&&await m(i)&&d.push("/projects")},C=w.stats.tasks>0?w.stats.completed/w.stats.tasks*100:0;return(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-2",children:w.name}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:w.description}),(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,r.jsx)(h.E,{className:(e=>{switch(e){case"active":return"bg-green-50 dark:bg-green-900/200";case"completed":return"bg-blue-50 dark:bg-blue-900/200";default:return"bg-gray-50 dark:bg-gray-9000"}})(w.status),children:w.status}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:w.tags.map(e=>(0,r.jsx)(h.E,{variant:"secondary",children:e},e))})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(p.$,{variant:"outline",onClick:()=>y(!0),children:"Edit Project"}),(0,r.jsx)(p.$,{variant:"destructive",onClick:k,children:"Delete Project"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,r.jsxs)(j.Zp,{children:[(0,r.jsx)(j.aR,{children:(0,r.jsx)(j.ZB,{children:"Progress"})}),(0,r.jsx)(j.Wu,{children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(eJ.k,{value:C}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[w.stats.completed," of ",w.stats.tasks," tasks completed"]})]})})]}),(0,r.jsxs)(j.Zp,{children:[(0,r.jsx)(j.aR,{children:(0,r.jsx)(j.ZB,{children:"Status"})}),(0,r.jsx)(j.Wu,{children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Active Tasks"}),(0,r.jsx)("span",{children:w.stats.pending})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Blockers"}),(0,r.jsx)("span",{children:w.stats.blocked})]})]})})]}),(0,r.jsxs)(j.Zp,{children:[(0,r.jsx)(j.aR,{children:(0,r.jsx)(j.ZB,{children:"Team"})}),(0,r.jsx)(j.Wu,{children:(0,r.jsxs)("div",{className:"flex -space-x-2",children:[(null==(t=w.team)?void 0:t.slice(0,5).map(e=>{var t;return(0,r.jsxs)(v,{children:[(0,r.jsx)(b,{src:""}),(0,r.jsx)(N,{children:null==(t=e.name)?void 0:t.slice(0,2).toUpperCase()})]},e.id)}))||(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No team members yet"}),((null==(s=w.team)?void 0:s.length)||0)>5&&(0,r.jsxs)("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-sm",children:["+",((null==(n=w.team)?void 0:n.length)||0)-5]})]})})]})]}),(0,r.jsxs)(f.tU,{defaultValue:"tasks",className:"w-full",children:[(0,r.jsxs)(f.j7,{children:[(0,r.jsx)(f.Xi,{value:"tasks",children:"Tasks"}),(0,r.jsx)(f.Xi,{value:"team",children:"Team"}),(0,r.jsx)(f.Xi,{value:"activity",children:"Activity"})]}),(0,r.jsx)(f.av,{value:"tasks",children:(0,r.jsx)(eM,{projectId:i})}),(0,r.jsx)(f.av,{value:"team",children:(0,r.jsx)(eT,{projectId:i})}),(0,r.jsx)(f.av,{value:"activity",children:(0,r.jsxs)(j.Zp,{children:[(0,r.jsx)(j.aR,{children:(0,r.jsx)(j.ZB,{children:"Project Timeline"})}),(0,r.jsx)(j.Wu,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold mb-1",children:"Created"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:(0,eF.GP)(new Date(w.createdAt),"PPP")}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(0,eq.m)(new Date(w.createdAt))," ago"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold mb-1",children:"Last Updated"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:(0,eF.GP)(new Date(w.updatedAt),"PPP")}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(0,eq.m)(new Date(w.updatedAt))," ago"]})]}),(0,r.jsx)(eI,{mode:"single",selected:new Date(w.updatedAt),className:"rounded-md border"})]})})]})})]}),(0,r.jsx)(el,{project:w,open:g,onOpenChange:y})]})}},14130:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var r=s(74584),a=s(48539);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.Q)((0,r.$)(t))}},18035:(e,t,s)=>{"use strict";s.d(t,{T:()=>n});var r=s(73365),a=s(1521),l=s(14130);let n=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...a})});n.displayName="Textarea"},18159:(e,t,s)=>{"use strict";s.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>n,aR:()=>i});var r=s(73365),a=s(1521),l=s(14130);let n=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("card-3d rounded-lg text-card-foreground",s),...a})});n.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...a})});i.displayName="CardHeader";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});d.displayName="CardTitle";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...a})});o.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",s),...a})});c.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},33414:(e,t,s)=>{"use strict";s.d(t,{E:()=>i});var r=s(73365);s(1521);var a=s(82934),l=s(14130);let n=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,l.cn)(n({variant:s}),t),...a})}},35324:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>v,By:()=>p,ID:()=>x,Nh:()=>c,dr:()=>j,i3:()=>g,kL:()=>y,r$:()=>n,r1:()=>o,vm:()=>u,vr:()=>h,xx:()=>f});var r=s(73106);let a={projects:[],currentProject:null,loading:!1,error:null,filters:{status:[],tags:[],search:""},sort:{field:"updatedAt",order:"desc"}},l=(0,r.Z0)({name:"project",initialState:a,reducers:{setProjects:(e,t)=>{e.projects=t.payload},setCurrentProject:(e,t)=>{e.currentProject=t.payload},clearCurrentProject:e=>{e.currentProject=null},setLoading:(e,t)=>{e.loading=t.payload},setError:(e,t)=>{e.error=t.payload},updateFilters:(e,t)=>{e.filters={...e.filters,...t.payload}},resetFilters:e=>{e.filters=a.filters},updateSort:(e,t)=>{e.sort=t.payload},addProject:(e,t)=>{e.projects.push(t.payload)},updateProject:(e,t)=>{let s=e.projects.findIndex(e=>e.id===t.payload.id);if(-1!==s){var r;e.projects[s]={...e.projects[s],...t.payload},(null==(r=e.currentProject)?void 0:r.id)===t.payload.id&&(e.currentProject={...e.currentProject,...t.payload})}},deleteProject:(e,t)=>{var s;e.projects=e.projects.filter(e=>e.id!==t.payload),(null==(s=e.currentProject)?void 0:s.id)===t.payload&&(e.currentProject=null)},addTeamMember:(e,t)=>{let s=e.projects.find(e=>e.id===t.payload.projectId);if(s){var r;s.team=s.team||[],s.team.push(t.payload.member),(null==(r=e.currentProject)?void 0:r.id)===t.payload.projectId&&(e.currentProject.team=e.currentProject.team||[],e.currentProject.team.push(t.payload.member))}},removeTeamMember:(e,t)=>{let s=e.projects.find(e=>e.id===t.payload.projectId);if(s&&s.team){var r;s.team=s.team.filter(e=>e.id!==t.payload.memberId),(null==(r=e.currentProject)?void 0:r.id)===t.payload.projectId&&e.currentProject.team&&(e.currentProject.team=e.currentProject.team.filter(e=>e.id!==t.payload.memberId))}},updateProjectStats:(e,t)=>{let s=e.projects.find(e=>e.id===t.payload.projectId);if(s){var r;s.stats=t.payload.stats,(null==(r=e.currentProject)?void 0:r.id)===t.payload.projectId&&(e.currentProject.stats=t.payload.stats)}}}}),{setProjects:n,setCurrentProject:i,clearCurrentProject:d,setLoading:o,setError:c,updateFilters:u,resetFilters:m,updateSort:x,addProject:p,updateProject:h,deleteProject:f,addTeamMember:j,removeTeamMember:g,updateProjectStats:y}=l.actions,v=l.reducer},43155:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});var r=s(73365),a=s(1521),l=s(14130);let n=a.forwardRef((e,t)=>{let{className:s,type:a,...n}=e;return(0,r.jsx)("input",{type:a,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...n})});n.displayName="Input"},58005:(e,t,s)=>{"use strict";s.d(t,{$:()=>o,r:()=>d});var r=s(73365),a=s(1521),l=s(20544),n=s(82934),i=s(14130);let d=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"gradient-button text-primary-foreground hover:scale-105 shadow-glow",destructive:"bg-gradient-to-r from-red-500 to-red-600 text-white hover:from-red-600 hover:to-red-700 hover:scale-105 shadow-lg",outline:"btn-modern border border-input hover:scale-105",secondary:"glass text-secondary-foreground hover:scale-105 shadow-md",ghost:"hover:bg-accent hover:text-accent-foreground hover:scale-105",link:"text-primary underline-offset-4 hover:underline hover:scale-105"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:s,variant:a,size:n,asChild:o=!1,...c}=e,u=o?l.DX:"button";return(0,r.jsx)(u,{className:(0,i.cn)(d({variant:a,size:n,className:s})),ref:t,...c})});o.displayName="Button"},62222:(e,t,s)=>{"use strict";s.d(t,{d:()=>a,o:()=>r});let r=e=>{console.log("Toast:",e),"Notification"in window&&"granted"===Notification.permission?new Notification(e.title||"Notification",{body:e.description}):console.log("".concat(e.title?e.title+": ":"").concat(e.description))};function a(){return{toast:r}}},69672:(e,t,s)=>{"use strict";s.d(t,{k:()=>i});var r=s(73365),a=s(1521),l=s(28475),n=s(14130);let i=a.forwardRef((e,t)=>{let{className:s,value:a,...i}=e;return(0,r.jsx)(l.Root,{ref:t,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...i,children:(0,r.jsx)(l.Indicator,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});i.displayName=l.Root.displayName},73049:(e,t,s)=>{"use strict";s.d(t,{J:()=>o});var r=s(73365),a=s(1521),l=s(25092),n=s(82934),i=s(14130);let d=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.b,{ref:t,className:(0,i.cn)(d(),s),...a})});o.displayName=l.b.displayName},82198:(e,t,s)=>{Promise.resolve().then(s.bind(s,47636)),Promise.resolve().then(s.bind(s,616))},95561:(e,t,s)=>{"use strict";s.d(t,{Xi:()=>o,av:()=>c,j7:()=>d,tU:()=>i});var r=s(73365),a=s(1521),l=s(47636),n=s(14130);let i=l.Root,d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.List,{ref:t,className:(0,n.cn)("glass-strong inline-flex h-12 items-center justify-center rounded-xl p-1 text-slate-700 dark:text-slate-300 font-medium",s),...a})});d.displayName=l.List.displayName;let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.Trigger,{ref:t,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-lg px-4 py-2 text-sm font-semibold transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 text-slate-600 dark:text-slate-300 hover:text-slate-800 dark:hover:text-slate-100 hover:bg-white dark:bg-gray-800/30 dark:hover:bg-white dark:bg-gray-800/10 data-[state=active]:bg-gradient-to-r data-[state=active]:from-emerald-500 data-[state=active]:to-green-600 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-emerald-500/25 data-[state=active]:scale-105 relative z-50",s),...a})});o.displayName=l.Trigger.displayName;let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.Content,{ref:t,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a})});c.displayName=l.Content.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[9947,4515,7636,3065,1890,2347,4870,7358],()=>t(82198)),_N_E=e.O()}]);